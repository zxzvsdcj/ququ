<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html {
        background: transparent !important;
        background-color: transparent !important;
      }

      body {
        width: 80px;
        height: 80px;
        overflow: hidden;
        background: transparent !important;
        background-color: transparent !important;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 
                     'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif;
        display: flex;
        align-items: center;
        justify-content: center;
        /* 移除body的拖拽，让悬浮球本身可拖拽 */
        -webkit-app-region: no-drag;
      }

      #float-ball {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        /* 确保悬浮球完全独立，不受父元素影响 */
        flex-shrink: 0;
        /* 不使用CSS拖拽，改用JS实现 */
        -webkit-app-region: no-drag;
        cursor: move;
      }

      /* 状态：空闲 */
      #float-ball.idle {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      /* 状态：录音中 */
      #float-ball.recording {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        animation: pulse 1.5s ease-in-out infinite;
      }

      /* 状态：处理中 */
      #float-ball.processing {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        animation: rotate 2s linear infinite;
      }

      /* 状态：错误 */
      #float-ball.error {
        background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
      }

      /* 悬停效果 */
      #float-ball:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
      }

      /* 图标容器 */
      .icon {
        color: white;
        font-size: 24px;
        line-height: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        /* 图标区域不可拖拽，允许点击 */
        -webkit-app-region: no-drag;
        pointer-events: auto;
      }

      /* 声波效果 */
      .wave-container {
        display: flex;
        gap: 3px;
        align-items: center;
        justify-content: center;
      }

      .wave-bar {
        width: 3px;
        background: white;
        border-radius: 2px;
        animation: wave 1.2s ease-in-out infinite;
      }

      .wave-bar:nth-child(1) { height: 12px; animation-delay: 0s; }
      .wave-bar:nth-child(2) { height: 18px; animation-delay: 0.1s; }
      .wave-bar:nth-child(3) { height: 14px; animation-delay: 0.2s; }
      .wave-bar:nth-child(4) { height: 20px; animation-delay: 0.3s; }

      /* 加载点效果 */
      .dots-container {
        display: flex;
        gap: 4px;
        align-items: center;
        justify-content: center;
      }

      .dot {
        width: 6px;
        height: 6px;
        background: white;
        border-radius: 50%;
        animation: bounce 1.4s ease-in-out infinite;
      }

      .dot:nth-child(1) { animation-delay: 0s; }
      .dot:nth-child(2) { animation-delay: 0.2s; }
      .dot:nth-child(3) { animation-delay: 0.4s; }

      /* 动画 */
      @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
      }

      @keyframes rotate {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }

      @keyframes wave {
        0%, 100% { height: 12px; }
        50% { height: 24px; }
      }

      @keyframes bounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-6px); }
      }

      /* 右键菜单提示 */
      .context-hint {
        position: absolute;
        bottom: -25px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 10px;
        white-space: nowrap;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.2s;
      }

      #float-ball:hover .context-hint {
        opacity: 1;
      }
    </style>
  </head>
  <body>
    <div id="float-ball" class="idle">
      <div class="icon">
        <!-- 默认麦克风图标 -->
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 1C10.34 1 9 2.34 9 4V12C9 13.66 10.34 15 12 15C13.66 15 15 13.66 15 12V4C15 2.34 13.66 1 12 1Z" fill="white"/>
          <path d="M19 10V12C19 15.866 15.866 19 12 19C8.13401 19 5 15.866 5 12V10H7V12C7 14.7614 9.23858 17 12 17C14.7614 17 17 14.7614 17 12V10H19Z" fill="white"/>
          <path d="M11 20V23H13V20H11Z" fill="white"/>
        </svg>
      </div>
    </div>

    <script type="module" src="./floatBall.jsx"></script>
  </body>
</html>

